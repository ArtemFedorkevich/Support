Задача.

Базово:
Служба саппорта:
Задачи:
1) Пользователь пишет тикет и отправляет.

2) Саппорт видит решенные, нерешенные и замороженные тикеты(все по факту), может отвечать на них.

3) Пользователь может просмотреть ответ саппорта, и добавить новое сообщение( саппорт ответить на него).

4) Саппорт может изменять статусы тикетов.

Запросы отправлял программой POSTMAN
А) Создание пользователя и саппорта. Аутентификация.
Добавление саппорта возможно с помощью команды python manage.py createsuperuser.
Данные о всех пользователях, в том числе саппортах хранятся в таблице authentication_user. У саппортов в колонке is_staff значение 1.
Для тестирования можно использовать саппорта:
{
    "user": {
        "email": "admin@admin.com",
        "password":"admin_2021"
    }
}

Для тестирования возможностей пользователя:

{
    "user": {
        "email": "user1@user.user",
        "password":"qweasdzxc"
    }
}

По пути users/ можно создать нового юзера отправив POST-запрос в  формате:
{
    "user": {
	 "username": "user10",
        "email": "user1@user.user",
        "password":"qweasdzxc"
    }
}

По адресу login/ если отправить почту и пароль в формате:
{
    "user": {
        "email": "admin@admin.com",
        "password":"admin_2021"
    }
}

В ответ придет токен:
{
    "email": "admin@admin.com",
    "username": "admin",
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpZCI6MSwiZXhwIjoxNjMzNjE0MjkyfQ.yR8yfmvTPsploDo6VOsKNnC3wPQeCHrGYTGPR5DXbbw"
}

Токен действует один день. Его можно использовать для создания тем, отправления тикетов…

Непосредственно задачи:
1)	Пользователь пишет тикет и отправляет.
3) Пользователь может просмотреть ответ саппорта, и добавить новое сообщение( саппорт ответить на него).

По адресу problems/ методом POST можно отправить тему вопроса.
Формат:
{
    "problem": {
        "title": "New problem 10"
    }
}
Ответ:
{
    "problem": {
        "id": 6,
        "title": "New problem 10",
        "owner": "admin",
        "status": "In progress"
    }
}

Методом GET на этой странице можно посмотреть все созданные проблемы.

По адресу problemindetail/
Методом GET можно посмотреть все cообщения по данной теме с ответами саппорта.
{
    "problem": [
        {
            "id": 3,
            "title": "New problem 10",
            "user_question": "What about rain?",
            "support_answer": "",
            "title_id": 6,
            "owner": "admin"
        }

Адрес problemindetail/
Можно отправить сообщение где конкретно описать проблему (важно – пользователь должен быть создателем проблемы (указанное title_id должно совпадать с id созданной юзером проблемы) – сделал так, чтобы другие пользователи не могли писать не в свою проблему, чтобы не было путаницы).
Здесь доступны методы POST:

формат:
{"question":{
        "user_question": "New question",
        "title_id":10
}
}

2)	Саппорт видит решенные, нерешенные и замороженные тикеты(все по факту), может отвечать на них.
4) Саппорт может изменять статусы тикетов.

Все проблемы и их статус можно посмотреть по адресу:
problems/

По адресу localhost:8000/problems/pk/
pk – id проблемы можно посмотреть статус конкретной проблемы (важно, обращаться может только аутентифицированный пользователь со значением is_staff=1 (см. выше)).
Можно изменить статус отправив запрос методом PATCH в формате
{
        "status": "OPENED"
}
Ответ:
{
    "staff": {
        "id": 1,
        "title": "potato",
        "owner": "user2",
        "status": "OPENED"
    }
}

Для ответа на конкретный вопрос нужно перейти по адресу
localhost:8000/api/problemindetail/pk/
pk – id конкретного вопроса
GET показывает вопрос пользователя.
Чтобы ответить на вопрос нужно методом PATCH отправить запрос в формате:
{
        "support_answer": "Yes, you are"
}
